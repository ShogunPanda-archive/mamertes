<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Mamertes::Command
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Mamertes.html" title="Mamertes (module)">Mamertes</a></span></span>
     &raquo; 
    <span class="title">Command</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Mamertes::Command
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Mamertes::Command</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/mamertes/command.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This class represent a command (action) for Mamertes.</p>

<p>Every command has the execution block and a set of option. Optionally, it also has before and after hooks.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Application.html" title="Mamertes::Application (class)">Application</a></span></p>
</div>




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#action-instance_method" title="#action (instance method)">- (Proc|NilClass) <strong>action</strong>(&amp;hook) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the action of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#after-instance_method" title="#after (instance method)">- (Proc|NilClass) <strong>after</strong>(&amp;hook) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the after hook, that is a block executed after the action of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#application-instance_method" title="#application (instance method)">- (Application) <strong>application</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the application this command belongs to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#arguments-instance_method" title="#arguments (instance method)">- (Array) <strong>arguments</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of arguments of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#banner-instance_method" title="#banner (instance method)">- (String) <strong>banner</strong>(value = nil) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the description of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#before-instance_method" title="#before (instance method)">- (Proc|NilClass) <strong>before</strong>(&amp;hook) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the before hook, that is a block executed before the action of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#commands-instance_method" title="#commands (instance method)">- (Hash) <strong>commands</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of subcommands of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#description-instance_method" title="#description (instance method)">- (String) <strong>description</strong>(value = nil) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the short description of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (String) <strong>name</strong>(value = nil) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the name of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Hash) <strong>options</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of options of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">- (Command) <strong>parent</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The parent of this command.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#synopsis-instance_method" title="#synopsis (instance method)">- (String) <strong>synopsis</strong>(value = nil) </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads and optionally sets the synopsis of this command.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#argument-instance_method" title="#argument (instance method)">- (Object) <strong>argument</strong>(value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Adds a new argument to this command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_commands-instance_method" title="#clear_commands (instance method)">- (Hash) <strong>clear_commands</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear all subcommands of this commands.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_options-instance_method" title="#clear_options (instance method)">- (Hash) <strong>clear_options</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear all the options of this commands.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#command-instance_method" title="#command (instance method)">- (Command) <strong>command</strong>(name, options = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Adds a new subcommand to this command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Object) <strong>execute</strong>(args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Execute this command, running its action or a subcommand.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_name-instance_method" title="#full_name (instance method)">- (String) <strong>full_name</strong>(suffix = nil, separator = &quot;:&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets a full name, that is the name of this command and its ancestor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_banner%3F-instance_method" title="#has_banner? (instance method)">- (Boolean) <strong>has_banner?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if this command has a banner.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_commands%3F-instance_method" title="#has_commands? (instance method)">- (Boolean) <strong>has_commands?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if this command has subcommands.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_description%3F-instance_method" title="#has_description? (instance method)">- (Boolean) <strong>has_description?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if this command has a description.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_options%3F-instance_method" title="#has_options? (instance method)">- (Boolean) <strong>has_options?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if this command has options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Command) <strong>initialize</strong>(options = {}, &amp;block) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application%3F-instance_method" title="#is_application? (instance method)">- (Boolean) <strong>is_application?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Checks if the command is an application.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#option-instance_method" title="#option (instance method)">- (Option) <strong>option</strong>(name, forms = [], options = {}, &amp;action) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Adds a new option to this command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_with-instance_method" title="#setup_with (instance method)">- (Command) <strong>setup_with</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Setups the command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_help-instance_method" title="#show_help (instance method)">- (Object) <strong>show_help</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Shows a help about this command.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>) <strong>initialize</strong>(options = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The settings to initialize the command with.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 53</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="action=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="action-instance_method">
  
    - (<tt>Proc|NilClass</tt>) <strong>action</strong>(&amp;hook) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the action of this command.</p>

<p>A command action is only executed if no subcommand is executed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc|NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The action of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="after=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="after-instance_method">
  
    - (<tt>Proc|NilClass</tt>) <strong>after</strong>(&amp;hook) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the after hook, that is a block executed after the action of this command.</p>

<p>This hook is only executed if no subcommand is executed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc|NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The after hook of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="application=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="application-instance_method">
  
    - (<tt><span class='object_link'><a href="Application.html" title="Mamertes::Application (class)">Application</a></span></tt>) <strong>application</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the application this command belongs to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Application.html" title="Mamertes::Application (class)">Application</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The application this command belongs to or <code>self</code>, if the command is an Application.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="arguments-instance_method">
  
    - (<tt>Array</tt>) <strong>arguments</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of arguments of this command.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of arguments of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="banner=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="banner-instance_method">
  
    - (<tt>String</tt>) <strong>banner</strong>(value = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the description of this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>NilClass|Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The new description of this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The description of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="before=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="before-instance_method">
  
    - (<tt>Proc|NilClass</tt>) <strong>before</strong>(&amp;hook) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the before hook, that is a block executed before the action of this command.</p>

<p>This hook is only executed if no subcommand is executed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc|NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The before hook of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="commands-instance_method">
  
    - (<tt>Hash</tt>) <strong>commands</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of subcommands of this command.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of subcommands of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="description=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="description-instance_method">
  
    - (<tt>String</tt>) <strong>description</strong>(value = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the short description of this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>NilClass|Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The new short description of this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The short description of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>String</tt>) <strong>name</strong>(value = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the name of this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>NilClass|Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The new name of this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="options-instance_method">
  
    - (<tt>Hash</tt>) <strong>options</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of options of this command.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of options of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="parent=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="parent-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>) <strong>parent</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The parent of this command.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The parent of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="synopsis=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="synopsis-instance_method">
  
    - (<tt>String</tt>) <strong>synopsis</strong>(value = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads and optionally sets the synopsis of this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>NilClass|Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The new synopsis of this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The synopsis of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 36</span>

<span class='rubyid_class class kw'>class</span> <span class='rubyid_Command constant id'>Command</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:description</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:banner</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:synopsis</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:before</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:action</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:after</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:application</span>
  <span class='rubyid_attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:parent</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:commands</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:options</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:arguments</span>

  <span class='comment val'># Creates a new command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The settings to initialize the command with.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the name of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new name of this command.</span>
  <span class='comment val'># @return [String] The name of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param suffix [String] A suffix to append.</span>
  <span class='comment val'># @param separator [String] The separator to use for components.</span>
  <span class='comment val'># @return [String] The full name.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the short description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new short description of this command.</span>
  <span class='comment val'># @return [String] The short description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_description identifier id'>description</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@description ivar id'>@description</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the description of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new description of this command.</span>
  <span class='comment val'># @return [String] The description of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_banner identifier id'>banner</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@banner ivar id'>@banner</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@banner ivar id'>@banner</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the synopsis of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [NilClass|Object] The new synopsis of this command.</span>
  <span class='comment val'># @return [String] The synopsis of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_synopsis identifier id'>synopsis</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@synopsis ivar id'>@synopsis</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the before hook, that is a block executed before the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The before hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_before identifier id'>before</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@before ivar id'>@before</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@before ivar id'>@before</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Reads and optionally sets the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># A command action is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The action of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_action identifier id'>action</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@action ivar id'>@action</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@action ivar id'>@action</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Sets the after hook, that is a block executed after the action of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># This hook is only executed if no subcommand is executed.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Proc|NilClass] The after hook of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_after identifier id'>after</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span>
    <span class='rubyid_@after ivar id'>@after</span> <span class='assign token'>=</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='rubyid_@after ivar id'>@after</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a description.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a description, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has a banner.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has a banner, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new subcommand to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of this command. Must be unique.</span>
  <span class='comment val'># @param options [Hash] A set of options for this command.</span>
  <span class='comment val'># @return [Command] The newly added command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='comment val'># Add the help option</span>
    <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

    <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
    <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new option to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @see Option#initialize</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param name [String] The name of the option. Must be unique.</span>
  <span class='comment val'># @param forms [Array] An array of short and long forms for this option.</span>
  <span class='comment val'># @param options [Hash] The settings for the option.</span>
  <span class='comment val'># @param action [Proc] An optional action to pass to the option.</span>
  <span class='comment val'># @return [Option] The newly added option.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
    <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
    <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
    <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of subcommands of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_commands identifier id'>commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all subcommands of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of subcommands of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
    <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has subcommands.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has subcommands, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of options of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Hash] The list of options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_options identifier id'>options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Clear all the options of this commands.</span>
  <span class='comment val'># @return [Hash] The new (empty) list of the options of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
    <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Check if this command has options.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if this command has options, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Adds a new argument to this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param value [String] The argument to add.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the list of arguments of this command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Array] The list of arguments of this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_arguments identifier id'>arguments</span>
    <span class='rubyid_@args ivar id'>@args</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Returns the application this command belongs to.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Application] The application this command belongs to or `self`, if the command is an Application.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_application identifier id'>application</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span> <span class='colon op'>:</span> <span class='rubyid_@application ivar id'>@application</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Checks if the command is an application.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @return [Boolean] `true` if command is an application, `false` otherwise.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Setups the command.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param options [Hash] The setttings for this command.</span>
  <span class='comment val'># @return [Command] The command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Execute this command, running its action or a subcommand.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># @param args [Array] The arguments to pass to the command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
      <span class='comment val'># Run the before hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

      <span class='comment val'># Run the action</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

      <span class='comment val'># Run the after hook</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
    <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Shows a help about this command.</span>
  <span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
    <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='comment val'># Application</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Global options</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># First of all, grab all options and construct labels</span>
      <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

        <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
          <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
          <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='comment val'># Commands</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

      <span class='comment val'># Find the maximum lenght of the commands</span>
      <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

      <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
          <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
          <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="argument-instance_method">
  
    - (<tt>Object</tt>) <strong>argument</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Adds a new argument to this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The argument to add.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 243</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_argument identifier id'>argument</span><span class='lparen token'>(</span><span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='rubyid_@args ivar id'>@args</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_@args ivar id'>@args</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_value identifier id'>value</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_commands-instance_method">
  
    - (<tt>Hash</tt>) <strong>clear_commands</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Clear all subcommands of this commands.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new (empty) list of subcommands of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 209</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_commands identifier id'>clear_commands</span>
  <span class='rubyid_@commands ivar id'>@commands</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_options-instance_method">
  
    - (<tt>Hash</tt>) <strong>clear_options</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Clear all the options of this commands.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new (empty) list of the options of this command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 229</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_clear_options identifier id'>clear_options</span>
  <span class='rubyid_@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="command-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>) <strong>command</strong>(name, options = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Adds a new subcommand to this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of this command. Must be unique.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A set of options for this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The newly added command.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Error.html" title="Mamertes::Error (class)">Mamertes::Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 156</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_command identifier id'>command</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_@commands ivar id'>@commands</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:parent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:application</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_merge identifier id'>merge</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_command</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The command \&quot;#{self.full_name(name)}\&quot; already exists.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

  <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Command constant id'>Command</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>

  <span class='comment val'># Add the help option</span>
  <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='symbol val'>:help</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:help</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Shows this message.&quot;</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span> <span class='rbrace token'>}</span>

  <span class='rubyid_@commands ivar id'>@commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_command identifier id'>command</span>
  <span class='rubyid_command identifier id'>command</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-instance_method">
  
    - (<tt>Object</tt>) <strong>execute</strong>(args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Execute this command, running its action or a subcommand.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The arguments to pass to the command.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 292</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='rubyid_subcommand identifier id'>subcommand</span> <span class='assign token'>=</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_subcommand identifier id'>subcommand</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># We have a subcommand to call</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_subcommand identifier id'>subcommand</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span> <span class='rubyid_then then kw'>then</span> <span class='comment val'># Run our action</span>
    <span class='comment val'># Run the before hook</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_before identifier id'>before</span>

    <span class='comment val'># Run the action</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_action identifier id'>action</span>

    <span class='comment val'># Run the after hook</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_after identifier id'>after</span>
  <span class='rubyid_else else kw'>else</span> <span class='comment val'># Show the help</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_show_help identifier id'>show_help</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_name-instance_method">
  
    - (<tt>String</tt>) <strong>full_name</strong>(suffix = nil, separator = &quot;:&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Gets a full name, that is the name of this command and its ancestor. Optionally it also appends a suffix</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>suffix</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A suffix to append.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>separator</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;:&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The separator to use for components.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The full name.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 72</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_suffix identifier id'>suffix</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
    <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='notop op'>!</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='colon op'>:</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_suffix identifier id'>suffix</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_compact identifier id'>compact</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_separator identifier id'>separator</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_banner?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_banner?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if this command has a banner.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if this command has a banner, <code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 147</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_has_banner? fid id'>has_banner?</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_commands?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_commands?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if this command has subcommands.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if this command has subcommands, <code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 216</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_has_commands? fid id'>has_commands?</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_description?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_description?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if this command has a description.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if this command has a description, <code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 140</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_has_description? fid id'>has_description?</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_options?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_options?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if this command has options.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if this command has options, <code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 236</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_has_options? fid id'>has_options?</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_application?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Checks if the command is an application.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if command is an application, <code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 265</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_is_application? fid id'>is_application?</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Application constant id'>Application</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="option-instance_method">
  
    - (<tt><span class='object_link'><a href="Option.html" title="Mamertes::Option (class)">Option</a></span></tt>) <strong>option</strong>(name, forms = [], options = {}, &amp;action) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Adds a new option to this command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the option. Must be unique.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>forms</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An array of short and long forms for this option.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The settings for the option.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>action</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An optional action to pass to the option.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Option.html" title="Mamertes::Option (class)">Option</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The newly added option.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Option.html#initialize-instance_method" title="Mamertes::Option#initialize (method)">Option#initialize</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 182</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_option identifier id'>option</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
  <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ensure_string identifier id'>ensure_string</span>
  <span class='rubyid_@options ivar id'>@options</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='rubyid_then then kw'>then</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The global option \&quot;#{name}\&quot; already exists.&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='symbol val'>:duplicate_option</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The option \&quot;#{name}\&quot; already exists for the command \&quot;#{self.full_name}\&quot;.&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_option identifier id'>option</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Mamertes constant id'>Mamertes</span><span class='colon2 op'>::</span><span class='rubyid_Option constant id'>Option</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_forms identifier id'>forms</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_action identifier id'>action</span><span class='rparen token'>)</span>
  <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span>
  <span class='rubyid_option identifier id'>option</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_with-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>) <strong>setup_with</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Setups the command.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The setttings for this command.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mamertes::Command (class)">Command</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279
280
281
282
283
284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 273</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_with identifier id'>setup_with</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

  <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='rubyid_method identifier id'>method</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

    <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_method identifier id'>method</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span> <span class='rubyid_then then kw'>then</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_method identifier id'>method</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_self self kw'>self</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="show_help-instance_method">
  
    - (<tt>Object</tt>) <strong>show_help</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Shows a help about this command.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mamertes/command.rb', line 312</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_show_help identifier id'>show_help</span>
  <span class='rubyid_console identifier id'>console</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span> <span class='colon op'>:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_console identifier id'>console</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='rubyid_then then kw'>then</span>
    <span class='comment val'># Application</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[NAME]&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s%s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_description? fid id'>has_description?</span> <span class='integer val'>? </span><span class='string val'>&quot; - &quot;</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[command [sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[SYNOPSIS]&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_synopsis identifier id'>synopsis</span> <span class='colon op'>:</span> <span class='string val'>&quot;%s [options] %s %s[command-options] [arguments] &quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_executable_name identifier id'>executable_name</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='integer val'>? </span><span class='string val'>&quot;[sub-command [sub-sub-command ...]] &quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_banner? fid id'>has_banner?</span> <span class='rubyid_then then kw'>then</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;[DESCRIPTION]&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_banner identifier id'>banner</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Global options</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_options? fid id'>has_options?</span> <span class='rubyid_then then kw'>then</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[GLOBAL OPTIONS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[OPTIONS]&quot;</span><span class='rparen token'>)</span>

    <span class='comment val'># First of all, grab all options and construct labels</span>
    <span class='rubyid_lefts identifier id'>lefts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_each_value identifier id'>each_value</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_option identifier id'>option</span><span class='bitor op'>|</span>
      <span class='rubyid_left identifier id'>left</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_short identifier id'>complete_short</span><span class='comma token'>,</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_complete_long identifier id'>complete_long</span><span class='rbrack token'>]</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_requires_argument? fid id'>requires_argument?</span> <span class='rubyid_then then kw'>then</span>
        <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
        <span class='rubyid_left identifier id'>left</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot; &quot;</span> <span class='plus op'>+</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_meta identifier id'>meta</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_left identifier id'>left</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_has_help? fid id'>has_help?</span> <span class='integer val'>? </span><span class='rubyid_option identifier id'>option</span><span class='dot token'>.</span><span class='rubyid_help identifier id'>help</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
      <span class='rubyid_lefts identifier id'>lefts</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_head identifier id'>head</span><span class='bitor op'>|</span>
        <span class='rubyid_help identifier id'>help</span> <span class='assign token'>=</span> <span class='rubyid_lefts identifier id'>lefts</span><span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='rbrack token'>]</span>
        <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_head identifier id'>head</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_help identifier id'>help</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Commands</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_has_commands? fid id'>has_commands?</span> <span class='rubyid_then then kw'>then</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_is_application? fid id'>is_application?</span> <span class='integer val'>? </span><span class='string val'>&quot;[COMMANDS]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;[SUBCOMMANDS]&quot;</span><span class='rparen token'>)</span>

    <span class='comment val'># Find the maximum lenght of the commands</span>
    <span class='rubyid_alignment identifier id'>alignment</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:length</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span>

    <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_with_indentation identifier id'>with_indentation</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
      <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='bitor op'>|</span>
        <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_commands identifier id'>commands</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span>
        <span class='rubyid_console identifier id'>console</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;%s - %s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_ljust identifier id'>ljust</span><span class='lparen token'>(</span><span class='rubyid_alignment identifier id'>alignment</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span><span class='dot token'>.</span><span class='rubyid_present? fid id'>present?</span> <span class='integer val'>? </span><span class='rubyid_command identifier id'>command</span><span class='dot token'>.</span><span class='rubyid_description identifier id'>description</span> <span class='colon op'>:</span> <span class='string val'>&quot;*NO DESCRIPTION PROVIDED*&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='rubyid_exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Feb  3 11:59:52 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.8.7).
</div>

  </body>
</html>